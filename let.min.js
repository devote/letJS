/**
 * letJS library 0.4
 *
 * @version 0.4
 * @author Copyright 2012-2013, <a href="mailto:spb.piksel@gmail.com">Dmitrii Pakhtinov</a>
 * Created 03/30/2012
 */
(function(n,l,p){function s(a,e){var b=this.target,c=0===arguments.length,e=1<arguments.length?e:a;if(v)c?(a=b.selectionStart,e=b.selectionEnd):b.setSelectionRange(a,e);else if(w){var d=q.selection.createRange();d.parentElement()===b&&(b[g]=d.getBookmark());try{d=b.createTextRange()}catch(j){}c?b[g]&&(d.moveToBookmark(b[g]),e=d.text.length,d.collapse(!0),d.moveStart("character",-b.value.length),a=d.text.length,e+=a):(d.collapse(!0),d.moveEnd("character",e),d.moveStart("character",a),d.select(),b[g]=
d.getBookmark())}return[a,e]}function x(a){return"data-let-input"===a.attr?""===a.insertValue||(a.regExp||RegExp("^["+a.rule+"]+$","g")).test(a.insertValue):"data-let-template"===a.attr?(a.regExp||RegExp("("+a.rule+")","g")).test(a.expectedValue):!+a.rule||a.expectedValue.length<=+a.rule}var q=n.document,t=q.documentElement,u=q.createElement("input"),v="selectionStart"in u,w="createTextRange"in u,m=n.letJS=n.letJS||{},r=["data-let-input","data-let-template","data-let-length"],g="__rangeBookmark";
t.letJSLoaded||function(a,e,b){for(var c=0;c<r.length;c++)m.hasOwnProperty(r[c])||(m[r[c]]=x);a.letJSLoaded=!0;for(c=0;c<e.length;c++)a.addEventListener?a.addEventListener(e[c],b,!0):a.attachEvent&&a.attachEvent("on"+({focus:"focusin",blur:"focusout"}[e[c]]||e[c]),function(){b.call(a,n.event)})}(t,"keypress,keydown,paste,cut,mousedown,mouseup,dragstart,dragenter,dragover,drop,focus,blur".split(","),function(a){var e=a.type,b=a.target||a.srcElement,c="",d,j;if(b&&b.nodeName in{INPUT:1,TEXTAREA:1}&&
!(b.type in{radio:1,checkbox:1})){var f=a.which==p?a.charCode!=p?a.charCode:a.keyCode:a.which,k=s.call({target:b}),g=k[0],k=k[1],h=g,i=k,o="value"in b?b.value:"";switch(e){case "paste":c=(c=a.clipboardData||n.clipboardData||l)&&c.getData("Text");case "cut":break;case "focusin":case "focusout":e=e==="focusin"?"focus":"blur";case "focus":case "blur":case "mousedown":case "mouseup":f=33;case "keydown":f=f===46?-1:f===8?8:f>32&&f<41?-2:0;case "keypress":if(f===0||a.ctrlKey&&f>0||a.altKey)return;f===8?
h=h-(h==i&&h>0?1:0):f===-1?i=i+(h==i&&i<o.length?1:0):f>0&&(c=String.fromCharCode(f));break;case "dragstart":case "dragenter":case "dragover":case "drop":c=l;break;default:return}for(j in m)if(c===l||Object.prototype.hasOwnProperty.call(m,j)&&(f===-2&&m[j].length>1||f!==-2)&&(d=b.getAttribute(j))!==p&&m[j].call(b,{originalEvent:a,type:e,attr:j,rule:d,target:b,selection:s,value:o,insertValue:c,cropValue:o.substring(h,i)||"",expectedValue:o.substr(0,h<g?h:g)+c+o.substring(i>k?i:k),regExp:(d=/^\/(.*)\/(?:([igm]+))?$/.exec(d))&&
RegExp(d[1],d[2]),insertStart:g,insertEnd:k,cropStart:h,cropEnd:i},f===-2)===l){a.preventDefault?a.preventDefault():a.returnValue=l;return l}}})})(window,!1,null);
