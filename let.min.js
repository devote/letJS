/**
 * letJS library 0.2
 *
 * @version 0.2
 * @author Copyright 2012-2013, <a href="mailto:spb.piksel@gmail.com">Dmitrii Pakhtinov</a>
 * date 03/30/2012
 */
(function(m,j,p){function s(a,d){var b=this.target,e=0===arguments.length,d=1<arguments.length?d:a;if(u)e?(a=b.selectionStart,d=b.selectionEnd):b.setSelectionRange(a,d);else if(v){var c=q.selection.createRange();c.parentElement()===b&&(b[g]=c.getBookmark());c=b.createTextRange();e?b[g]&&(c.moveToBookmark(b[g]),d=c.text.length,c.collapse(!0),c.moveStart("character",-b.value.length),a=c.text.length,d+=a):(c.collapse(!0),c.moveEnd("character",d),c.moveStart("character",a),c.select(),b[g]=c.getBookmark())}return[a,
d]}function r(a){return"data-let-input"===a.attr?""===a.insertValue||(a.regExp||RegExp("^["+a.rule+"]+$","g")).test(a.insertValue):"data-let-template"===a.attr?(a.regExp||RegExp("("+a.rule+")","g")).test(a.expectedValue):!+a.rule||a.expectedValue.length<=+a.rule}var q=m.document,t=q.createElement("input"),u="selectionStart"in t,v="createTextRange"in t,g="__rangeBookmark";if(!("letJS"in m)){var o=m.letJS={"data-let-input":r,"data-let-template":r,"data-let-length":r};(function(a,d,b){for(var e=0;e<
d.length;e++)a.addEventListener?a.addEventListener(d[e],b,j):a.attachEvent&&a.attachEvent("on"+d[e],function(){b.call(a,m.event)})})(q.documentElement,"keypress,keydown,paste,cut,mousedown,mouseup,dragstart,dragenter,dragover,drop".split(","),function(a){var d=a.type,b=a.target||a.srcElement,e="",c,l;if(b&&b.nodeName in{INPUT:1,TEXTAREA:1}){var f=a.which==p?a.charCode!=p?a.charCode:a.keyCode:a.which,k=s.call({target:b}),g=k[0],k=k[1],h=g,i=k,n="value"in b?b.value:"";switch(d){case "paste":e=(e=a.clipboardData||
m.clipboardData||j)&&e.getData("Text");case "cut":break;case "mousedown":case "mouseup":f=33;case "keydown":f=f===46?-1:f===8?8:f>32&&f<41?-2:0;case "keypress":if(f===0||a.ctrlKey&&f>0||a.altKey)return;f===8?h=h-(h==i&&h>0?1:0):f===-1?i=i+(h==i&&i<n.length?1:0):f>0&&(e=String.fromCharCode(f));break;case "dragstart":case "dragenter":case "dragover":case "drop":e=j;break;default:return}for(l in o)if(e===j||Object.prototype.hasOwnProperty.call(o,l)&&(f===-2&&o[l].length>1||f!==-2)&&(c=b.getAttribute(l))!==
p&&o[l].call(b,{originalEvent:a,type:d,attr:l,rule:c,target:b,selection:s,value:n,insertValue:e,cropValue:n.substring(h,i)||"",expectedValue:n.substr(0,h<g?h:g)+e+n.substring(i>k?i:k),regExp:(c=/^\/(.*)\/(?:([igm]+))?$/.exec(c))&&RegExp(c[1],c[2]),insertStart:g,insertEnd:k,cropStart:h,cropEnd:i},f===-2)===j){a.preventDefault?a.preventDefault():a.returnValue=j;return j}}})}})(window,!1,null);
